// ... PREVIOUS CODE ...

// API endpoint to insert images by the testId
app.post('/api/insertImages/:testId', upload.array('images', 5), (req, res) => {
  const testId = req.params.testId;
  const images = req.files.map((file) => file.filename);

  const insertQuery = `INSERT INTO ${test1Table} (images, testId) VALUES ?`;

  const imageValues = images.map((image) => [image, testId]);

  connection.query(insertQuery, [imageValues], (error, results) => {
    if (error) {
      console.error('Error inserting images:', error);
      return res.status(500).json({ error: 'Error inserting images' });
    }

    console.log('Images inserted successfully');
    return res.status(200).json({ message: 'Images inserted successfully' });
  });
});

// ... REST OF THE CODE ...

// Start the server
const port = 3000; // or any other port you prefer
app.listen(port, () => {
  console.log(`Server is running on port ${port}`);
});


